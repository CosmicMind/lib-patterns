"use strict";var g=Object.defineProperty;var y=(e,t,s)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var a=(e,t,s)=>(y(e,typeof t!="symbol"?t+"":t,s),s),b=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var n=(e,t,s)=>(b(e,t,"read from private field"),s?s.call(e):t.get(e)),f=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},l=(e,t,s,i)=>(b(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s);var h=(e,t,s)=>(b(e,t,"access private method"),s);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("@cosmicmind/foundationjs");var r,u,p;class O{constructor(t){f(this,u);f(this,r,void 0);l(this,r,t)}set(t,s){return Object.defineProperty(n(this,r),t,{configurable:!0,enumerable:!0,writable:!1,value:s}),this}map(t){for(const[s,i]of Object.entries(t))this.set(s,i);return this}build(){const t=n(this,r);return h(this,u,p).call(this),t}}r=new WeakMap,u=new WeakSet,p=function(){n(this,r)};class j{clone(){return c.assign(Object.create(Object.getPrototypeOf(this)??null),this)}}class P{constructor(){a(this,"topics");this.topics={}}subscribe(t,...s){this.topics[t]||(this.topics[t]=new Set);const i=this.topics[t];if(c.guard(i))for(const o of s)i==null||i.add(o)}once(t,...s){const i=o=>{this.unsubscribe(t,i);for(const d of s)d(o)};this.subscribe(t,i)}unsubscribe(t,...s){if(this.topics[t]){const i=this.topics[t];if(c.guard(i))for(const o of s)i==null||i.delete(o)}}publish(t,s){return c.timeout(()=>{const i=this.topics[t];if(c.guard(i))for(const o of i)o(s)})}publishSync(t,s){const i=this.topics[t];if(c.guard(i))for(const o of i)o(s)}}exports.Builder=O;exports.Observable=P;exports.Prototype=j;
